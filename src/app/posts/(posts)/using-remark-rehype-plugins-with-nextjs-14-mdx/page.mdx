import Date from '~/posts/_components/Date'

export const metadata = {
  title: 'Using Remark and Rehype Plugins with Next.js 14 and MDX',
  date: 'October 13, 2024',
  summary:
    'Transforming MDX content with Remark and Rehype plugins in Next.js 14.',
  alternates: {
    canonical: '/posts/using-remark-rehype-plugins-with-nextjs-14-mdx',
  },
}

# {metadata.title}

<Date>{metadata.date}</Date>

I have been redesigning and redeveloping my personal website for a couple of weeks now. Before when I was using the Pages Router, I used [contentlayer](https://github.com/contentlayerdev/contentlayer) with Remark and Rehype plugins to transform my MDX content. While converting my website to the App Router, I thought it would be a good idea to try [@next/mdx](https://nextjs.org/docs/pages/building-your-application/configuring/mdx#nextmdx) instead.

## What Are Remark and Rehype Plugins?

[Remark](https://github.com/remarkjs/remark) and [Rehype](https://github.com/rehypejs/rehype) are tools used to transform markdown and HTML content respectively with plugins. Since React does not natively support markdown, the markdown content needs to be transformed into HTML before it can be rendered. This is where Remark and Rehype come in.

## Important Note To Get Remark and Rehype Plugins Working With Next.js 14

When using Remark or Rehype plugins with Next.js, you have to make sure that the experimental feature `mdxRs` is either not defined or explicitly set to `false` in your `next.config.mjs` file. I wasted some time trying to figure out why the plugins were not working with my setup, but I finally found the solution from a comment in a [StackOverflow post](https://stackoverflow.com/a/75571708) and [Next.js GitHub issue](https://github.com/vercel/next.js/issues/46659#issuecomment-1542183041).

```js showLineNumbers
import createMDX from '@next/mdx'

/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: { mdxRs: false },
  pageExtensions: ['mdx', 'ts', 'tsx'],
  reactStrictMode: true,
}

const withMDX = createMDX({
  options: {
    remarkPlugins: [],
    rehypePlugins: [],
  },
})

export default withMDX(nextConfig)
```
